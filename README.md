# QMapPermalink

QGISの地図ビューを外部から直接ナビゲートするパーマリンクプラグイン

## 概要

QMapPermalinkは、QGISの地図やプロジェクト内の特定の画面ビュー（位置やズームレベルなど）を固有に指し示す「パーマリンク（固定リンク）」の仕組みを実現するQGISプラグインです。

Webのパーマリンクの概念をGISに応用し、外部資料から地図の特定箇所へワンクリックでジャンプできる画期的な機能を提供します。

## 主な特徴

- **パーマリンク生成**: QGISの地図画面の特定位置（座標）やズーム状態をURLやコマンドとして表現・保存
- **外部連携**: ExcelやPDFなどの資料にリンクを埋め込み、クリック可能にする
- **瞬時ナビゲーション**: リンクを使ってQGIS内で指定の位置に瞬時にジャンプし、関連レイヤやビュー状態を再現
- **軽量実装**: Python標準モジュールとQGIS APIで軽量に実装
- **ナビゲーション特化**: 画面移動（パン・ズーム・ジャンプ）が主目的の機能に特化

## 使用例

1. **資料作成時**
   - QGISで地図の特定箇所を表示
   - QMapPermalinkでパーマリンクを生成
   - ExcelやPDFの説明資料にリンクを埋め込み

2. **資料閲覧時**
   - 資料内のリンクをクリック
   - QGISが自動的に該当箇所へジャンプ
   - 説明内容と地図画面が瞬時に連携

## コンセプト

QMapPermalinkは、**「QGIS上で地図の特定表示状態を固定的に示し、そのリンク経由で外部から画面を素早く操作・移動できる画期的な仕組み」**を表現しています。

これにより、説明資料とQGISのマップ画面を密接に結びつけ、空間情報の共有・説明の効率化を実現します。

## 利点

- **効率的な情報共有**: 資料と地図画面の密接な連携
- **直感的な操作**: Webのパーマリンクと同じ感覚で使用可能
- **時間短縮**: 手動での画面移動が不要
- **説明の質向上**: 資料と実際の地図表示の完全同期

## 技術仕様

- **プログラミング言語**: Python
- **対応プラットフォーム**: QGIS
- **依存関係**: Python標準モジュール + QGIS API
- **実装方針**: 軽量・高速・シンプル

## インストール

### 開発版インストール

1. このリポジトリをクローンまたはダウンロード
2. QGISプラグインディレクトリに `qmap_permalink` フォルダをコピー
3. QGISを再起動してプラグインを有効化

### 配布版インストール

1. `create_zip.py` を実行して配布用ZIPを作成
2. QGISのプラグインマネージャーから「ZIPファイルからインストール」を選択
3. 作成されたZIPファイルを指定してインストール

## 使い方

### パーマリンクの生成

1. QGISで地図を希望の位置・ズームレベルに調整
2. プラグインを起動（ツールバーのアイコンまたはメニューから）
3. 「Generate Permalink」ボタンをクリック
4. 生成されたパーマリンクURLをコピー

### 外部文書への埋め込み

- Excel: セルにパーマリンクURLを入力し、ハイパーリンクとして設定
- PDF: パーマリンクURLをリンクとして埋め込み
- その他の文書: URLを直接貼り付け

### パーマリンクからのナビゲーション

1. パーマリンクURLをコピー
2. プラグインダイアログの下部テキストボックスに貼り付け
3. 「Navigate」ボタンをクリックして地図ビューに移動

## 開発情報

### ファイル構成

```
qmap_permalink/
├── __init__.py                      # プラグイン初期化
├── qmap_permalink.py               # メインプラグインロジック
├── qmap_permalink_dialog.py        # ダイアログクラス
├── qmap_permalink_dialog_base.ui   # Qt Designer UIファイル
├── metadata.txt                    # プラグインメタデータ
├── icon.png                       # プラグインアイコン
└── i18n/                          # 多言語対応
    ├── QMapPermalink_ja.ts        # 日本語翻訳
    ├── QMapPermalink_fr.ts        # フランス語翻訳
    └── [その他の言語ファイル]
```

### 翻訳ファイルのコンパイル

```bash
python compile_translations.py
```

### 配布用ZIPの作成

```bash
python create_zip.py
```

### 対応言語

- 英語 (English) - デフォルト
- 日本語 (Japanese)
- フランス語 (French)
- ドイツ語 (German)
- スペイン語 (Spanish)
- イタリア語 (Italian)
- ポルトガル語 (Portuguese)
- 中国語 (Chinese)
- ロシア語 (Russian)
- ヒンディー語 (Hindi)

### 技術仕様

- **QGIS互換性**: 3.44 - 3.999
- **Qt要件**: Qt5
- **プログラミング言語**: Python 3
- **UIフレームワーク**: Qt Designer (.ui ファイル)
- **翻訳システム**: Qt Linguist (.ts/.qm ファイル)

## ライセンス

このプロジェクトは[ライセンス](LICENSE)の下で公開されています。

## 貢献

プロジェクトへの貢献を歓迎します。Issue報告やプルリクエストをお待ちしています。

---

**QMapPermalink** - GIS特有の「地図ビューリンク」に特化した新しい価値を創出し、資料と地図画面連携の新しい利便性を実現します。