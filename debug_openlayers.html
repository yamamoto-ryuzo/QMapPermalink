<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenLayers Test Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v8.2.0/ol.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/ol@v8.2.0/dist/ol.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 10px; }
        #map { width: 100%; height: 600px; border: 2px solid #ddd; }
        .info { background: #f5f5f5; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>ğŸ—ºï¸ OpenLayerså‹•ä½œãƒ†ã‚¹ãƒˆ</h2>
        <p>ã“ã®ãƒšãƒ¼ã‚¸ã§OpenLayersãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
    </div>
    
    <div id="map"></div>
    
    <script>
        try {
            console.log('OpenLayers version:', ol.VERSION_);
            
            // æ—¥æœ¬ã®ä¸­å¿ƒä»˜è¿‘ã®åº§æ¨™ï¼ˆæ±äº¬ï¼‰
            const map = new ol.Map({
                target: 'map',
                layers: [
                    new ol.layer.Tile({
                        source: new ol.source.OSM()
                    })
                ],
                view: new ol.View({
                    center: ol.proj.fromLonLat([139.6917, 35.6895]), // æ±äº¬
                    zoom: 10
                })
            });
            
            // ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
            const marker = new ol.Feature({
                geometry: new ol.geom.Point(ol.proj.fromLonLat([139.6917, 35.6895]))
            });
            
            marker.setStyle(new ol.style.Style({
                image: new ol.style.Circle({
                    radius: 8,
                    fill: new ol.style.Fill({color: 'red'}),
                    stroke: new ol.style.Stroke({color: 'white', width: 2})
                })
            }));
            
            const vectorSource = new ol.source.Vector({
                features: [marker]
            });
            
            const vectorLayer = new ol.layer.Vector({
                source: vectorSource
            });
            
            map.addLayer(vectorLayer);
            
            console.log('âœ… OpenLayers map initialized successfully');
            
            // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
            map.on('click', function(event) {
                const coordinate = ol.proj.toLonLat(event.coordinate);
                alert('ã‚¯ãƒªãƒƒã‚¯ä½ç½®: ' + coordinate[1].toFixed(6) + ', ' + coordinate[0].toFixed(6));
            });
            
        } catch (error) {
            console.error('âŒ OpenLayers initialization error:', error);
            document.getElementById('map').innerHTML = '<div style="color: red; padding: 20px;">OpenLayersã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message + '</div>';
        }
    </script>
</body>
</html>