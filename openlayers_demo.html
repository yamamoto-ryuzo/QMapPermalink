<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>QMap Permalink - Interactive Map Demo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@8.2.0/ol.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/ol@8.2.0/dist/ol.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 10px; }
        #map { width: 100%; height: 400px; border: 2px solid #ddd; border-radius: 8px; margin: 10px 0; }
        .info-section { margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 5px; }
        .link-section { margin: 15px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .link-title { font-weight: bold; color: #333; margin-bottom: 5px; }
        .map-title { font-weight: bold; color: #2c5aa0; margin-bottom: 10px; font-size: 18px; }
        a { color: #1a73e8; text-decoration: none; word-break: break-all; }
        a:hover { text-decoration: underline; }
        .coordinates { font-family: monospace; background: #e9ecef; padding: 5px; border-radius: 3px; }
    </style>
</head>
<body>
    <h2>ğŸ—ºï¸ QMap Permalink - Interactive Map View Demo</h2>
    
    <div class="info-section">
        <div class="map-title">ğŸ“ QGISãƒãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼å†ç¾ãƒ‡ãƒ¢</div>
        <p>QGISã®ç¾åœ¨ã®åœ°å›³è¡¨ç¤ºã‚’OpenLayersã§å†ç¾ã—ã¦ã„ã¾ã™ã€‚åŒã˜ä½ç½®ãƒ»ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    </div>

    <div class="info-section">
        <div class="coordinates">
            <strong>åº§æ¨™:</strong> 35.681236, 139.767125 | 
            <strong>ã‚ºãƒ¼ãƒ :</strong> 17 | 
            <strong>ã‚¹ã‚±ãƒ¼ãƒ«:</strong> 1:5,000 | 
            <strong>åº§æ¨™ç³»:</strong> EPSG:4326
        </div>
    </div>

    <div id="map"></div>

    <script>
        // OpenLayersãƒãƒƒãƒ—ã®åˆæœŸåŒ–
        const map = new ol.Map({
            target: 'map',
            layers: [
                // OpenStreetMap ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                }),
                // åœ°ç†é™¢åœ°å›³ï¼ˆæ—¥æœ¬ã®è©³ç´°åœ°å›³ï¼‰
                new ol.layer.Tile({
                    source: new ol.source.XYZ({
                        url: 'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
                        attributions: '&copy; <a href="https://maps.gsi.go.jp/development/ichiran.html">å›½åœŸåœ°ç†é™¢</a>',
                        maxZoom: 18
                    }),
                    opacity: 0.7
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([139.767125, 35.681236]), // æ±äº¬é§…å‘¨è¾º
                zoom: 17
            })
        });

        // ä¸­å¿ƒç‚¹ã«ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
        const marker = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([139.767125, 35.681236]))
        });

        const markerStyle = new ol.style.Style({
            image: new ol.style.Circle({
                radius: 8,
                fill: new ol.style.Fill({color: '#ff4444'}),
                stroke: new ol.style.Stroke({color: '#ffffff', width: 2})
            })
        });

        marker.setStyle(markerStyle);

        const markerLayer = new ol.layer.Vector({
            source: new ol.source.Vector({
                features: [marker]
            })
        });

        map.addLayer(markerLayer);

        // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã§åº§æ¨™ã‚’è¡¨ç¤º
        map.on('click', function(event) {
            const coordinate = ol.proj.toLonLat(event.coordinate);
            alert('ã‚¯ãƒªãƒƒã‚¯ä½ç½®: ' + coordinate[1].toFixed(6) + ', ' + coordinate[0].toFixed(6));
        });

        console.log('QMap Permalink OpenLayers Map Demo initialized');
    </script>

    <div class="info-section">
        <div class="map-title">ğŸ”— å¤–éƒ¨ãƒãƒƒãƒ—ã‚µãƒ¼ãƒ“ã‚¹</div>
        <p>åŒã˜ä½ç½®ã‚’ä»–ã®ãƒãƒƒãƒ—ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚‚ç¢ºèªã§ãã¾ã™ï¼š</p>
        
        <div class="link-section">
            <div class="link-title">ğŸ—ºï¸ Google Maps ã§è¡¨ç¤º</div>
            <a href="https://www.google.co.jp/maps/@35.681236,139.767125,17z" target="_blank" rel="noopener noreferrer">https://www.google.co.jp/maps/@35.681236,139.767125,17z</a>
        </div>
        
        <div class="link-section">
            <div class="link-title">ğŸŒ Google Earth ã§è¡¨ç¤º</div>
            <a href="https://earth.google.com/web/@35.681236,139.767125,610a,35y,0h,0t,0r" target="_blank" rel="noopener noreferrer">https://earth.google.com/web/@35.681236,139.767125,610a,35y,0h,0t,0r</a>
        </div>
    </div>

    <hr>
    <div class="info-section">
        <p><strong>ğŸ“¡ QMap Permalink v1.7.0 - OpenLayers Integration Demo</strong></p>
        <p>ã“ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒƒãƒ—ã¯QGISãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ŒQMap Permalinkã€ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p>
        <p>ãƒãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦åº§æ¨™ã‚’ç¢ºèªã—ãŸã‚Šã€ã‚ºãƒ¼ãƒ ãƒ»ãƒ‘ãƒ³ã§å‘¨è¾ºã‚’æ¢ç´¢ã§ãã¾ã™ã€‚</p>
        <ul>
            <li><strong>èµ¤ã„ãƒãƒ¼ã‚«ãƒ¼:</strong> QGISã§æŒ‡å®šã•ã‚ŒãŸä¸­å¿ƒç‚¹</li>
            <li><strong>åœ°ç†é™¢åœ°å›³:</strong> æ—¥æœ¬ã®è©³ç´°ãªåœ°å½¢å›³ã‚’è¡¨ç¤º</li>
            <li><strong>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ“ä½œ:</strong> ã‚ºãƒ¼ãƒ ãƒ»ãƒ‘ãƒ³ãƒ»ã‚¯ãƒªãƒƒã‚¯åº§æ¨™å–å¾—ãŒå¯èƒ½</li>
        </ul>
    </div>
</body>
</html>